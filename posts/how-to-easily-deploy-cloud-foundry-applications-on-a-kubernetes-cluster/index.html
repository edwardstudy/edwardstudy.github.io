<!doctype html><html lang=en><meta charset=utf-8>
<meta name=viewport content="width=device-width">
<title>[转载]How to easily deploy Cloud Foundry applications on a Kubernetes cluster | Edwardesire</title>
<meta name=generator content="Hugo Eureka 0.8.3">
<link rel=stylesheet href=/css/eureka.min.css>
<script defer src=/js/eureka.min.js></script>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=preload href="https://fonts.googleapis.com/css2?family=Lora:wght@400;600;700&family=Noto+Serif+SC:wght@400;600;700&display=swap" as=style onload="this.onload=null,this.rel='stylesheet'">
<link rel=stylesheet href=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/styles/solarized-light.min.css media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/highlight.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.1.0/build/languages/dart.min.js crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/js/all.min.js integrity="sha256-uNYoXefWRqv+PsIF/OflNmwtKM4lStn9yrz2gVl6ymo=" crossorigin></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X media=print onload="this.media='all',this.onload=null" crossorigin>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin></script>
<script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]})})</script>
<script defer src=https://cdn.jsdelivr.net/npm/mermaid@8.9.2/dist/mermaid.min.js integrity="sha256-Zmpaaj+GXFsPF5WdPArSrnW3b30dovldeKsW00xBVwE=" crossorigin></script>
<link rel=icon type=image/png sizes=32x32 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_32x32_fill_box_center_3.png>
<link rel=apple-touch-icon sizes=180x180 href=/images/icon_hu64421c6c7700f606f0ad45d807017b09_5843_180x180_fill_box_center_3.png>
<meta name=description content="本人在IBM Developer发表了一篇关于cf-operator的介绍。相比原文，内容更加简单易懂。这里也提一嘴cf-o当前的状态。首先，第一个GA">
<script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"/posts/"},{"@type":"ListItem","position":2,"name":"[转载]How to easily deploy Cloud Foundry applications on a Kubernetes cluster","item":"/posts/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/"}]}</script>
<script type=application/ld+json>{"@context":"https://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/"},"headline":"[转载]How to easily deploy Cloud Foundry applications on a Kubernetes cluster | Edwardesire","datePublished":"2020-01-29T03:08:00+00:00","dateModified":"2020-01-29T03:08:00+00:00","wordCount":1306,"publisher":{"@type":"Person","name":"C. Wang","logo":{"@type":"ImageObject","url":"/images/icon.png"}},"description":"本人在IBM Developer发表了一篇关于cf-operator的介绍。相比原文，内容更加简单易懂。这里也提一嘴cf-o当前的状态。首先，第一个GA"}</script><meta property="og:title" content="[转载]How to easily deploy Cloud Foundry applications on a Kubernetes cluster | Edwardesire">
<meta property="og:type" content="article">
<meta property="og:image" content="/images/icon.png">
<meta property="og:url" content="/posts/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/">
<meta property="og:description" content="本人在IBM Developer发表了一篇关于cf-operator的介绍。相比原文，内容更加简单易懂。这里也提一嘴cf-o当前的状态。首先，第一个GA">
<meta property="og:locale" content="en">
<meta property="og:site_name" content="Edwardesire">
<meta property="article:published_time" content="2020-01-29T03:08:00+00:00">
<meta property="article:modified_time" content="2020-01-29T03:08:00+00:00">
<meta property="article:section" content="posts">
<body class="flex flex-col min-h-screen">
<header class="fixed flex items-center w-full min-h-16 pl-scrollbar z-50 bg-secondary-bg shadow-sm">
<div class="w-full max-w-screen-xl mx-auto"><script>let storageColorScheme=localStorage.getItem("lightDarkMode");((storageColorScheme=='Auto'||storageColorScheme==null)&&window.matchMedia("(prefers-color-scheme: dark)").matches||storageColorScheme=="Dark")&&document.getElementsByTagName('html')[0].classList.add('dark')</script>
<nav class="flex items-center justify-between flex-wrap px-4 py-4 md:py-0">
<a href=/ class="mr-6 text-primary-text text-xl font-bold">Edwardesire</a>
<button id=navbar-btn class="md:hidden flex items-center px-3 py-2" aria-label="Open Navbar">
<i class="fas fa-bars"></i>
</button>
<div id=target class="hidden block md:flex md:flex-grow md:justify-between md:items-center w-full md:w-auto text-primary-text z-20">
<div class="md:flex md:h-16 text-sm md:flex-grow pb-4 md:pb-0 border-b md:border-b-0">
<a href=/#about class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 border-transparent mr-4">About</a>
<a href=/posts/ class="block mt-4 md:inline-block md:mt-0 md:h-(16-4px) md:leading-(16-4px) box-border md:border-t-2 md:border-b-2 selected-menu-item mr-4">Posts</a>
</div>
<div class=flex>
<div class="relative pt-4 md:pt-0">
<div class="cursor-pointer hover:text-eureka" id=lightDarkMode>
<i class="fas fa-adjust"></i>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-30" id=is-open>
</div>
<div class="absolute flex flex-col left-0 md:left-auto right-auto md:right-0 hidden bg-secondary-bg w-48 rounded py-2 border border-tertiary-bg cursor-pointer z-40" id=lightDarkOptions>
<span class="px-4 py-1 hover:text-eureka" name=Light>Light</span>
<span class="px-4 py-1 hover:text-eureka" name=Dark>Dark</span>
<span class="px-4 py-1 hover:text-eureka" name=Auto>Auto</span>
</div>
</div>
</div>
</div>
<div class="fixed hidden inset-0 opacity-0 h-full w-full cursor-default z-0" id=is-open-mobile>
</div>
</nav>
<script>let element=document.getElementById('lightDarkMode');storageColorScheme==null||storageColorScheme=='Auto'?document.addEventListener('DOMContentLoaded',()=>{window.matchMedia("(prefers-color-scheme: dark)").addEventListener('change',switchDarkMode)}):storageColorScheme=="Light"?(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'sun'),element.firstElementChild.classList.add('fa-sun')):storageColorScheme=="Dark"&&(element.firstElementChild.classList.remove('fa-adjust'),element.firstElementChild.setAttribute("data-icon",'moon'),element.firstElementChild.classList.add('fa-moon')),document.addEventListener('DOMContentLoaded',()=>{getcolorscheme(),switchBurger()})</script>
</div>
</header>
<main class="flex-grow pt-16">
<div class=pl-scrollbar>
<div class="w-full max-w-screen-xl lg:px-4 xl:px-8 mx-auto">
<div class="grid grid-cols-2 lg:grid-cols-8 gap-4 lg:pt-12">
<div class="col-span-2 lg:col-start-2 lg:col-span-6 bg-secondary-bg rounded px-6 py-8">
<h1 class="font-bold text-3xl text-primary-text">[转载]How to easily deploy Cloud Foundry applications on a Kubernetes cluster</h1>
<div class="flex flex-wrap flex-row items-center mt-2 text-tertiary-text">
<div class="mr-6 my-2">
<i class="fas fa-calendar mr-1"></i>
<span>2020-01-29</span>
</div>
<div class="mr-6 my-2">
<i class="fas fa-clock mr-1"></i>
<span>3 min read</span>
</div>
</div>
<div class=content>
<p>本人在<a href=https://developer.ibm.com/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/>IBM Developer</a>发表了一篇关于cf-operator的介绍。相比<a href=2019/09/06/intro-of-cf-operator/>原文</a>，内容更加简单易懂。这里也提一嘴cf-o当前的状态。首先，第一个GA版本已经在圣诞节发布，最新版本[2.0]（https://github.com/cloudfoundry-incubator/cf-operator/releases/tag/v2.0.0）除了修复问题外，还增加了secret rotation的功能。其次是相应的CRD依据项目名称（Quarks）进行了重命名（Extended* -> Quarks*）。其他内容可以结合上一篇文章一起阅读。</p>
<hr>
<div class=cpt-byline__wrap>
<p class=cpt-byline__author>Use the cf-operator pattern to package, deploy, and manage Kubernetes native applications.</p>
<hr>
</div>
<section class=wp-content>
<p xmlns=http://www.w3.org/1999/xhtml>Cloud Foundry is an open source cloud application platform that makes building, testing, deploying, and scaling applications easier and faster. It provides a choice of clouds, developer frameworks, and application services. The open source project is available through a variety of private cloud distributions and public cloud instances, including <a href="https://cloud.ibm.com/docs/cloud-foundry-public?topic=cloud-foundry-public-getting-started">IBM Cloud</a>.</p>
<p>To deploy Cloud Foundry yourself, you must prepare several virtual machines and use the <a href=https://www.bosh.io/docs/>BOSH</a> tool. Due to the popularity of Kubernetes, most cloud software now runs on it. Therefore, the Cloud Foundry community created a Kubernetes operator pattern, called <code style=font-family:monospace;font-size:1rem>cf-operator</code>, which can be used to deploy and manage Cloud Foundry applications natively on a Kubernetes cluster. This article explains what the <code style=font-family:monospace;font-size:1rem>cf-operator</code> pattern is and how you can use it.</p>
<h2 id=prerequisites>Prerequisites</h2>
<ol>
<li>Understanding of <a href=https://kubernetes.io/docs/concepts/extend-kubernetes/operator>Kubernetes operators</a>.</li>
<li>Understanding of <a href=https://bosh.io/docs/manifest-v2>BOSH deployment config</a>.</li>
<li>Understanding of <a href=https://www.cloudfoundry.org/>Cloud Foundry concepts</a>.</li>
</ol>
<h2 id=estimated-time>Estimated time</h2>
<p>Allow about 15 minutes to read this article and try out the example.</p>
<h2 id=overview-of-the-cf-operator-pattern>Overview of the cf-operator pattern</h2>
<p><code style=font-family:monospace;font-size:1rem>cf-operator</code> is a Kubernetes operator pattern to package, deploy, and manage Kubernetes native applications. These applications are both deployed on Kubernetes and managed by its APIs and the <code style=font-family:monospace;font-size:1rem>kubectl</code> command-line tool. The operator automates installation, self-service provisioning, and maintenance of the application.</p>
<p>To install and manage your applications that run on Kubernetes clusters, the operator uses a custom resource definition (CRD) file to extend a set of cohesive APIs and a controller pattern that enables the operator to reconcile the current state of the Kubernetes system to a desired state. The CRD allows you to define the application resources including configurations and orchestration. The controller watches the resource instances and invokes the reconcile loop to arrange your application into a desired state. For example, the deployment controller will create new pods when you scale up deployment.</p>
<h2 id=how-cf-operator-works>How cf-operator works</h2>
<p><img data-src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/diagram-cloud-foundry-containerization.jpg alt="overview diagram of cloud foundry containerization" src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/diagram-cloud-foundry-containerization.jpg></p>
<p>The diagram above shows the two main parts of Cloud Foundry on Kubernetes. To run Cloud Foundry applications on Kubernetes, you must create container images. The Cloud Foundry community currently uses BOSH releases as a means for delivery, so the first step is to translate your Cloud Foundry BOSH releases into container images. To do so, the Cloud Foundry community recommends using a tool named <a href=https://github.com/cloudfoundry-incubator/fissile>Fissile</a>.</p>
<p>After you create the necessary Cloud Foundry container images, you must tell the <code style=font-family:monospace;font-size:1rem>cf-operator</code> pattern how to deploy each container image on the Kubernetes cluster. You can use the <a href=https://github.com/cloudfoundry/cf-deployment/blob/master/cf-deployment.yml><code style=font-family:monospace;font-size:1rem>cf-deployment</code> manifest</a> to tell <code style=font-family:monospace;font-size:1rem>cf-operator</code> to create Kubernetes Jobs, Pods, and StatefulSets as Cloud Foundry components running on the Kubernetes cluster. After that, <code style=font-family:monospace;font-size:1rem>cf-operator</code> will watch all of the Kubernetes resources that belong to Cloud Foundry, compare them with the <code style=font-family:monospace;font-size:1rem>cf-deployment</code> manifest, and reconcile to update Kubernetes resources. The watch and reconcile mechanism is very helpful from an operations perspective, such as when to update Cloud Foundry and correct the Kubernetes resources when any Cloud Foundry component fails.</p>
<p>In addition, <code style=font-family:monospace;font-size:1rem>cf-operator</code> implements the following features to help Cloud Foundry jobs run smoothly on Kubernetes:</p>
<ul>
<li>Fetch the <code style=font-family:monospace;font-size:1rem>cf-deployment</code> manifest that contains Cloud Foundry configurations and convert them to CRD files.</li>
<li>Render BOSH templates in runtime and move rendering jobs from main containers to <a href=https://kubernetes.io/docs/concepts/workloads/pods/init-containers/>Init Containers</a>.</li>
<li>Remove the Cloud Foundry <code style=font-family:monospace;font-size:1rem>monit</code> tool in the main container and trigger each BOSH job exclusively in a container.</li>
</ul>
<h2 id=how-cf-operator-deploys-cloud-foundry-on-kubernetes>How cf-operator deploys Cloud Foundry on Kubernetes</h2>
<p>To deploy Cloud Foundry on Kubernetes, <code style=font-family:monospace;font-size:1rem>cf-operator</code> watches and manages four different types of custom resources:</p>
<ul>
<li>BoshDeployment</li>
<li>ExtendedJob</li>
<li>ExtendedSecret</li>
<li>ExtendedStatefulSet</li>
</ul>
<p>These Kubernetes resources are extended from Kubernetes’ native Job, Secret, and StatefulSet, and add new features, such as a blue/green update strategy for StatefulSet. As a result, <code style=font-family:monospace;font-size:1rem>cf-operator</code> creates and manages Kubernetes with the custom resources: ExtendedJob, ExtendedSecret, and ExtendedStatefulSet.</p>
<p>Another important custom resource is BoshDeployment. It defines the desired <code style=font-family:monospace;font-size:1rem>cf-deployment</code> manifest. <code style=font-family:monospace;font-size:1rem>cf-operator</code> watches it and performs the following actions:</p>
<ul>
<li>Reads the deployment manifest and generates Secrets.</li>
<li>Converts the BOSH workloads into the Kubernetes resources mentioned above.</li>
<li>Deploys these Kubernetes resources on a Kubernetes cluster.</li>
</ul>
<p><img data-src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/diagram-how-cf-operator-controllers-work.jpg alt="flow diagram of how cf-operator controllers work" src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/diagram-how-cf-operator-controllers-work.jpg></p>
<p>This diagram abstracts and highlights how <code style=font-family:monospace;font-size:1rem>cf-operator</code> controllers work after BoshDeployment is created. The controllers watch BoshDeployment resources and other configuration resources (Secrets, ConfigMaps). After creating the BoshDeployment resource on Kubernetes, <code style=font-family:monospace;font-size:1rem>cf-operator</code> will start reconciliation, which will eventually result in the deployment of Cloud Foundry on Kubernetes as ExtendedJob, ExtendedSecret, and ExtendedStatefulSet to make all of Cloud Foundry run correctly on the Kubernetes cluster.</p>
<h2 id=deployment-example>Deployment example</h2>
<p>This section shows an example of how to install <code style=font-family:monospace;font-size:1rem>cf-operator</code> and use it to deploy Cloud Foundry.</p>
<ol>
<li><p>Install <code style=font-family:monospace;font-size:1rem>cf-operator</code> on Kubernetes by following the <a href=https://github.com/cloudfoundry-incubator/cf-operator>README</a> instructions within the <code style=font-family:monospace;font-size:1rem>cf-operator</code> GitHub repository.</p>
</li>
<li><p>Run the following command to install <code style=font-family:monospace;font-size:1rem>cf-operator</code> in the <code style=font-family:monospace;font-size:1rem>cfo</code> namespace:</p>
<div class="bx--snippet bx--snippet--multi bx--snippet-btn--expand--hide" data-code-snippet><div class=bx--snippet-container aria-label="Code Snippet Text"><pre><code>helm install --name cf-operator --namespace cfo --set "global.operator.watchNamespace=kubecf" https://s3.amazonaws.com/cf-operators/helm-charts/cf-operator-v0.4.2%2B121.g0be7cf70.tgz
</code></pre></div><button data-copy-btn type=button class=bx--snippet-button aria-label="Copy code" tabindex=0><svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9.0 2 0h8v1H2c-.6.0-1 .5-1 1v8z"/><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6.0-1-.4-1-1V4H4.5c-.3.0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3.0.5-.2.5-.5V9zm-4-6c.1.0.3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8.0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"/></svg><div class=bx--btn--copy__feedback data-feedback=Copied!></div></button><button class="bx--btn bx--btn--ghost bx--btn--sm bx--snippet-btn--expand" type=button><span class=bx--snippet-btn--text data-show-more-text="Show more" data-show-less-text="Show less">Show more</span><svg class="bx--icon-chevron--down" width="12" height="7" viewBox="0 0 12 7" aria-label="Show more icon"><title>Show more icon</title><path fill-rule="nonzero" d="M6.002 5.55 11.27.0l.726.685L6.003 7 0 .685.726.0z"/></svg></button></div>
</li>
<li xmlns=http://www.w3.org/1999/xhtml><p>Monitor and make sure the <code style=font-family:monospace;font-size:1rem>cf-operator</code> pod is running in <code style=font-family:monospace;font-size:1rem>cfo</code> namespace:</p>
<div class="bx--snippet bx--snippet--multi bx--snippet-btn--expand--hide" data-code-snippet><div class=bx--snippet-container aria-label="Code Snippet Text"><pre><code>kubectl get pod -n cfo
</code></pre></div><button data-copy-btn type=button class=bx--snippet-button aria-label="Copy code" tabindex=0><svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9.0 2 0h8v1H2c-.6.0-1 .5-1 1v8z"/><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6.0-1-.4-1-1V4H4.5c-.3.0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3.0.5-.2.5-.5V9zm-4-6c.1.0.3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8.0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"/></svg><div class=bx--btn--copy__feedback data-feedback=Copied!></div></button><button class="bx--btn bx--btn--ghost bx--btn--sm bx--snippet-btn--expand" type=button><span class=bx--snippet-btn--text data-show-more-text="Show more" data-show-less-text="Show less">Show more</span><svg class="bx--icon-chevron--down" width="12" height="7" viewBox="0 0 12 7" aria-label="Show more icon"><title>Show more icon</title><path fill-rule="nonzero" d="M6.002 5.55 11.27.0l.726.685L6.003 7 0 .685.726.0z"/></svg></button></div>
</li>
<li xmlns=http://www.w3.org/1999/xhtml><p>Install Cloud Foundry using <code style=font-family:monospace;font-size:1rem>cf-operator</code> by first downloading the <a href=https://scf-v3.s3.amazonaws.com/index.html>latest Helm release</a> for Cloud Foundry on Kubernetes.</p>
</li>
<li><p>Run the following command to install Cloud Foundry in the <code style=font-family:monospace;font-size:1rem>kubecf</code> namespace:</p>
<div class="bx--snippet bx--snippet--multi bx--snippet-btn--expand--hide" data-code-snippet><div class=bx--snippet-container aria-label="Code Snippet Text"><pre><code>helm install --name kubecf --namespace kubecf https://scf-v3.s3.amazonaws.com/kubecf-3.0.0-04bca19.tgz
</code></pre></div><button data-copy-btn type=button class=bx--snippet-button aria-label="Copy code" tabindex=0><svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9.0 2 0h8v1H2c-.6.0-1 .5-1 1v8z"/><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6.0-1-.4-1-1V4H4.5c-.3.0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3.0.5-.2.5-.5V9zm-4-6c.1.0.3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8.0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"/></svg><div class=bx--btn--copy__feedback data-feedback=Copied!></div></button><button class="bx--btn bx--btn--ghost bx--btn--sm bx--snippet-btn--expand" type=button><span class=bx--snippet-btn--text data-show-more-text="Show more" data-show-less-text="Show less">Show more</span><svg class="bx--icon-chevron--down" width="12" height="7" viewBox="0 0 12 7" aria-label="Show more icon"><title>Show more icon</title><path fill-rule="nonzero" d="M6.002 5.55 11.27.0l.726.685L6.003 7 0 .685.726.0z"/></svg></button></div>
</li>
<li xmlns=http://www.w3.org/1999/xhtml><p>Monitor and make sure the Cloud Foundry pod is running in <code style=font-family:monospace;font-size:1rem>kubecf</code> namespace:</p>
<div class="bx--snippet bx--snippet--multi bx--snippet-btn--expand--hide" data-code-snippet><div class=bx--snippet-container aria-label="Code Snippet Text"><pre><code>kubectl get pod -n kubecf
</code></pre></div><button data-copy-btn type=button class=bx--snippet-button aria-label="Copy code" tabindex=0><svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9.0 2 0h8v1H2c-.6.0-1 .5-1 1v8z"/><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6.0-1-.4-1-1V4H4.5c-.3.0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3.0.5-.2.5-.5V9zm-4-6c.1.0.3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8.0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"/></svg><div class=bx--btn--copy__feedback data-feedback=Copied!></div></button><button class="bx--btn bx--btn--ghost bx--btn--sm bx--snippet-btn--expand" type=button><span class=bx--snippet-btn--text data-show-more-text="Show more" data-show-less-text="Show less">Show more</span><svg class="bx--icon-chevron--down" width="12" height="7" viewBox="0 0 12 7" aria-label="Show more icon"><title>Show more icon</title><path fill-rule="nonzero" d="M6.002 5.55 11.27.0l.726.685L6.003 7 0 .685.726.0z"/></svg></button></div>
</li>
<li xmlns=http://www.w3.org/1999/xhtml><p>Deploy an app using a command such as <code style=font-family:monospace;font-size:1rem>cf push</code>:</p>
<div class="bx--snippet bx--snippet--multi bx--snippet-btn--expand--hide" data-code-snippet><div class=bx--snippet-container aria-label="Code Snippet Text"><pre><code>cf push app1
</code></pre></div><button data-copy-btn type=button class=bx--snippet-button aria-label="Copy code" tabindex=0><svg class="bx--snippet__icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path d="M1 10H0V2C0 .9.9.0 2 0h8v1H2c-.6.0-1 .5-1 1v8z"/><path d="M11 4.2V8h3.8L11 4.2zM15 9h-4c-.6.0-1-.4-1-1V4H4.5c-.3.0-.5.2-.5.5v10c0 .3.2.5.5.5h10c.3.0.5-.2.5-.5V9zm-4-6c.1.0.3.1.4.1l4.5 4.5c0 .1.1.3.1.4v6.5c0 .8-.7 1.5-1.5 1.5h-10c-.8.0-1.5-.7-1.5-1.5v-10C3 3.7 3.7 3 4.5 3H11z"/></svg><div class=bx--btn--copy__feedback data-feedback=Copied!></div></button><button class="bx--btn bx--btn--ghost bx--btn--sm bx--snippet-btn--expand" type=button><span class=bx--snippet-btn--text data-show-more-text="Show more" data-show-less-text="Show less">Show more</span><svg class="bx--icon-chevron--down" width="12" height="7" viewBox="0 0 12 7" aria-label="Show more icon"><title>Show more icon</title><path fill-rule="nonzero" d="M6.002 5.55 11.27.0l.726.685L6.003 7 0 .685.726.0z"/></svg></button></div>
<p xmlns=http://www.w3.org/1999/xhtml><img data-src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/screen-capture-deploy-an-app-using-a-cf-command.jpg alt="screen capture of deploying an app using a cf command" src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/screen-capture-deploy-an-app-using-a-cf-command.jpg></p>
</li>
<li><p>Verify the app is running.</p>
<p><img data-src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/screen-capture-app-verification.jpg alt="screen capture of app verification" src=https://developer.ibm.com/developer/articles/how-to-easily-deploy-cloud-foundry-applications-on-a-kubernetes-cluster/images/screen-capture-app-verification.jpg></p>
</li>
</ol>
<p>As a result, you now have the Cloud Foundry experience on top of Kubernetes. You can easily manage your Cloud Foundry deployment because it is fully compatible with the applications and lifecycle.</p>
<h2 id=summary>Summary</h2>
<p>By using the <code style=font-family:monospace;font-size:1rem>cf-operator</code> pattern, you can easily deploy Cloud Foundry on Kubernetes. Note that the community is actively enhancing <code style=font-family:monospace;font-size:1rem>cf-operator</code> by:</p>
<ul>
<li>Introducing BOSH tooling, such as manual repair with CloudCheck.</li>
<li>Integrating cloud native components, such as Istio, to manage components.</li>
<li>Enhancing operation efforts about self-healing and rollback.</li>
</ul><div style=display:none>Zi Da Xiao</div>
<div style=display:none>Yu Zhuang</div>
<footer class=code--entry-footer></footer> </section>
<hr>
<p>最后祝大家新年快乐！在新的一年，cf-o的主要目标是在IBM的生产环境上部署。而我个人的目标是朝着新的方向探索和学习。</p>
</div>
<div class="flex flex-col md:flex-row md:justify-between -mx-2 mt-4 px-2 pt-4 border-t">
<div>
<span class="block font-bold">Previous</span>
<a href=/posts/jie-jue-kubernetes-admission-webhook-timeout-error/ class=block>解决Kubernetes admission webhook timeout error</a>
</div>
<div class="md:text-right mt-4 md:mt-0">
<span class="block font-bold">Next</span>
<a href=/posts/intro-of-cf-operator/ class=block>cf-operator的介绍</a>
</div>
</div>
<div id=disqus_thread></div>
<script>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//edwardesire.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<script>document.addEventListener('DOMContentLoaded',()=>{hljs.initHighlightingOnLoad()})</script>
</div>
</div>
</main>
<footer class=pl-scrollbar>
<div class="w-full max-w-screen-xl mx-auto"><div class="text-center p-6 pin-b">
<p class="text-sm text-tertiary-text">&copy; 2021 <a href=https://www.edwardesire.com/>Edward Desire</a>
&#183; Powered by the <a href=https://github.com/wangchucheng/hugo-eureka class=hover:text-eureka>Eureka</a> theme for <a href=https://gohugo.io class=hover:text-eureka>Hugo</a></p>
</div></div>
</footer>
</body>
</html>